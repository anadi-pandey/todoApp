<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/Project_1/dist/css/profile.css">

</head>

<body>

    <div class="header">
        <h1>
            Profile
        </h1>
        <button onclick="parent.location = 'todo.html'">TO-DO</button>
    </div>
    <div class="upperBackground">
        <!-- <img src="/Project_1/dist/img/lauren-sauder-6GPBVYLapYQ-unsplash.jpg" alt=""> -->

        <div class="profilesection">
            <div class="dp">
                <img class="display_picture" id="myImg" src="/Project_1/dist/img/img_avatar.png" alt="">
            </div>
            <div class="main_form">
                <p> FIRST NAME : <input id="firstName"></input> </p>

                <p>
                    LAST NAME: <input id="lastName"></input>
                </p>

                <p>EMAIL ADDRESS: <input id="userEmail"></input></p>

                <p>GENDER: <input id="gender"></input></p>
                <div class="saveDetails">
                    <button id="saveDetails" onclick="saveMyDetails()">SAVE</button>
                </div>
            </div>

            <script>
                function saveMyDetails() {

                    const user_name = sessionStorage.getItem('current_user');
                    const usrNam = JSON.parse(user_name);
                   var todoitems = usrNam.todo_items;
                   var password = usrNam.pass;

                    let Fname = document.getElementById('firstName').value;
               
                    if (Fname != "") {
                        var firstName = Fname;
                    }else {
                        var firstName = usrNam.fName;
                       
                    }

                    let Lname = document.getElementById('lastName').value;
                    if (Lname != "") {
                        var lastName = Lname;
                    }else{
                        var lastName = usrNam.lName;
                    }

                    let Email = document.getElementById('userEmail').value;
                    if (Email != "") {
                        var emailAddress = Email;
                    }else{
                        var emailAddress = usrNam.eadd;
                    }

                    let Gender = document.getElementById('gender').value;
                    if (Gender != "") {
                        var updatedGender = document.getElementById('gender').value;
                    }else{
                        var updatedGender = usrNam.gen;
                    }

                   
                    var obj = {
                        fName: firstName,
                        lName: lastName,
                        eadd: emailAddress,
                        gen: updatedGender,
                        todo_items:todoitems,
                        pass: password
                    }

                    console.log(obj);

                    new_obj = JSON.stringify(obj);
                    sessionStorage.setItem('current_user', new_obj);
                    location.reload();
                }
            </script>


        </div>
    </div>



    <script src="/Project_1/dist/js/profile.js"></script>
</body>

</html>